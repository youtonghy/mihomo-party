╭──────────────────────────────────────────────────────────╮
│ ✻ Welcome to Claude Code!                                │
│                                                          │
│   /help for help, /status for your current setup         │
│                                                          │
│   cwd: C:\Users\youtonghy\Documents\GitHub\mihomo-party  │
│                                                          │
│   ────────────────────────────────────────────────────── │
│                                                          │
│   Overrides (via env):                                   │
│                                                          │
│   • API Base URL: https://code.newcli.com/claude         │
╰──────────────────────────────────────────────────────────╯

> 根据开发文档的需求,查找有关应用自动更新的部分
  ⎿  ⧉ Selected 1 lines from 开发文档.md in Cursor

● 我来帮你查找应用设置中检查更新的实现。让我搜索相关的代码。

● Update Todos
  ⎿  ☐ 搜索更新检查相关代码 
     ☐ 找到更新检查的API地址
     ☐ 找到下载更新的实现

● Search(pattern: "更新|update|检查更新|check.*update")
  ⎿  Found 73 files (ctrl+r to expand)

● Search(pattern: "updater")
  ⎿  Found 19 files (ctrl+r to expand)

● Search(pattern: "autoUpdater")
  ⎿  Found 1 file (ctrl+r to expand)

● 找到了关键的更新相关文件，让我查看最重要的几个：

● Read(src\main\resolve\autoUpdater.ts)
  ⎿  Read 117 lines (ctrl+r to expand)

● Read(src\renderer\src\components\updater\updater-button.tsx)
  ⎿  Read 69 lines (ctrl+r to expand)

● Read(src\renderer\src\components\updater\updater-modal.tsx)
  ⎿  Read 99 lines (ctrl+r to expand)

● Update Todos
  ⎿  ☒ 搜索更新检查相关代码 
     ☐ 找到更新检查的API地址
     ☐ 找到下载更新的实现

● 现在让我查看设置页面中的相关配置：

● Read(src\renderer\src\components\settings\general-config.tsx)
  ⎿  Read 50 lines (ctrl+r to expand)

● Search(pattern: "autoCheckUpdate", path: "src\renderer\src\co
        mponents\settings\general-config.tsx", output_mode:
        "content")
  ⎿  Found 4 lines (ctrl+r to expand)

● Update Todos
  ⎿  ☒ 搜索更新检查相关代码 
     ☒ 找到更新检查的API地址
     ☒ 找到下载更新的实现

● 根据代码分析，我找到了mihomo-party应用更新检查的完整实现：

  更新检查实现概览

  主要文件：
  - src\main\resolve\autoUpdater.ts:15-33 - 检查更新的核心逻辑
  -
  src\renderer\src\components\updater\updater-button.tsx:19-25
  - 前端更新检查触发
  - src\renderer\src\components\settings\general-config.tsx:120
  -125 - 设置页面的自动检查开关

  版本检查地址

  检查更新API：
  https://github.com/mihomo-party-org/mihomo-party/releases/lat
  est/download/latest.yml

  这个地址会返回一个YAML文件，包含最新版本信息和更新日志。

  下载地址模式

  下载地址模板： src\main\resolve\autoUpdater.ts:38
  https://github.com/mihomo-party-org/mihomo-party/releases/dow
  nload/v${version}/

  不同平台的文件名： src\main\resolve\autoUpdater.ts:39-45
  - Windows x64: mihomo-party-windows-${version}-x64-setup.exe
  - Windows ia32:
  mihomo-party-windows-${version}-ia32-setup.exe
  - Windows arm64:
  mihomo-party-windows-${version}-arm64-setup.exe
  - macOS x64: mihomo-party-macos-${version}-x64.pkg
  - macOS arm64: mihomo-party-macos-${version}-arm64.pkg

  工作流程

  1. 检查频率： 每10分钟自动检查一次（当启用自动检查时）
  2. 代理设置： 使用本地mihomo代理（默认127.0.0.1:7890）
  3. 版本比较： 对比latest.yml中的版本与当前版本
  4. 下载安装： 根据平台下载对应安装包并自动执行

  要修改更新源，你需要修改 src\main\resolve\autoUpdater.ts
  文件中的URL地址。

